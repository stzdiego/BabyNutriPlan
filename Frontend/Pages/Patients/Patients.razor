@page "/patients"
@using BabyNutriPlan.Shared.Entities
@inject DialogService DialogService

<PageTitle>Patients</PageTitle>

<RadzenStack Orientation="Orientation.Vertical" Gap="1rem">

    <RadzenStack Orientation="Orientation.Horizontal" Gap="1rem" JustifyContent="JustifyContent.End">
        <RadzenCard Variant="Variant.Outlined" Style="max-width: 14rem;max-height: 10rem">
            <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Center" Gap="1rem">
                <RadzenIcon Icon="people_alt" Style="font-size: 48px;" />
                <RadzenStack Gap="0">
                    <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex">Incidents Today</RadzenText>
                    <RadzenText TextStyle="TextStyle.Body1"><b>@_incidentsToday</b></RadzenText>
                </RadzenStack>
            </RadzenStack>
        </RadzenCard>

        <RadzenCard Variant="Variant.Outlined" Style="max-width: 14rem;max-height: 10rem">
            <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Center" Gap="1rem">
                <RadzenIcon Icon="people_alt" Style="font-size: 48px;" />
                <RadzenStack Gap="0">
                    <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex">Patients</RadzenText>
                    <RadzenText TextStyle="TextStyle.Body1"><b>@_patients.Count</b></RadzenText>
                </RadzenStack>
            </RadzenStack>
        </RadzenCard>
    </RadzenStack>

    <RadzenStack>
        <RadzenCard>
            <RadzenStack>
                <RadzenStack Orientation="Orientation.Horizontal" JustifyContent=JustifyContent.End Gap="0.3rem">
                    <RadzenButton Text="Details" Icon="visibility" Size=ButtonSize.Small Disabled=@(_selectedPatients == null)></RadzenButton>
                    <RadzenButton Text="Edit" Icon="edit" Size=ButtonSize.Small Disabled=@(_selectedPatients == null) ></RadzenButton>
                    <RadzenButton Text="Add" Icon="add" Size=ButtonSize.Small Click="OnClickAddPatient"></RadzenButton>
                </RadzenStack>
                <RadzenDataGrid Value="_selectedPatients" KeyProperty="Rowid" IsLoading="_patiendIsLoading"
                    Count="_patientsCount" Data="_patients" FilterPopupRenderMode="PopupRenderMode.OnDemand"
                    FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive" FilterMode="FilterMode.Simple"
                    AllowSorting="true" AllowFiltering="true" AllowPaging="true" PageSize="10"
                    PagerHorizontalAlign="HorizontalAlign.Left" TItem="Patient" ColumnWidth="200px"
                    ShowPagingSummary=true SelectionMode="DataGridSelectionMode.Single" Density="Density.Compact">
                    <Columns>
                        <RadzenDataGridColumn TItem="Patient" Property="Id" Title="Id" Frozen=true />
                        <RadzenDataGridColumn TItem="Patient" Property="FullName" Title="Name" Frozen=true />
                        <RadzenDataGridColumn TItem="Patient" Property="Age" Title="Months of Age" />
                        <RadzenDataGridColumn TItem="Patient" Property="Cel" Title="Cel Number" />
                        <RadzenDataGridColumn TItem="Patient" Property="City" Title="City" />
                        <RadzenDataGridColumn TItem="Patient" Property="Gender" Title="Gender" />
                    </Columns>
                </RadzenDataGrid>
            </RadzenStack>
        </RadzenCard>
    </RadzenStack>

</RadzenStack>

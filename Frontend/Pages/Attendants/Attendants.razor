@page "/attendants"
@inject DialogService DialogService

<PageTitle>Attendants</PageTitle>

<RadzenStack Orientation="Orientation.Vertical" Gap="1rem">

    <RadzenStack Orientation="Orientation.Horizontal" Gap="1rem" JustifyContent="JustifyContent.End">
        <RadzenCard Variant="Variant.Outlined" Style="max-width: 14rem;max-height: 10rem">
            <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Center" Gap="1rem">
                <RadzenIcon Icon="people_alt" Style="font-size: 48px;" />
                <RadzenStack Gap="0">
                    <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex">Incidents Today</RadzenText>
                    <RadzenText TextStyle="TextStyle.Body1"><b>@_incidentsToday</b></RadzenText>
                </RadzenStack>
            </RadzenStack>
        </RadzenCard>

        <RadzenCard Variant="Variant.Outlined" Style="max-width: 14rem;max-height: 10rem">
            <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Center" Gap="1rem">
                <RadzenIcon Icon="people_alt" Style="font-size: 48px;" />
                <RadzenStack Gap="0">
                    <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex">Patients</RadzenText>
                    <RadzenText TextStyle="TextStyle.Body1"><b>@_attendants.Count</b></RadzenText>
                </RadzenStack>
            </RadzenStack>
        </RadzenCard>
    </RadzenStack>

    <RadzenStack>
        <RadzenCard>
            <RadzenStack>
                <RadzenStack Orientation="Orientation.Horizontal" JustifyContent=JustifyContent.End Gap="0.3rem">
                    <RadzenButton Text="Details" Icon="visibility" Size=ButtonSize.Small Disabled=@(_selectedAttendants == null)></RadzenButton>
                    <RadzenButton Text="Edit" Icon="edit" Size=ButtonSize.Small Disabled=@(_selectedAttendants == null) ></RadzenButton>
                    <RadzenButton Text="Add" Icon="add" Size=ButtonSize.Small Click="OnClickAddPatient"></RadzenButton>
                </RadzenStack>
                <RadzenDataGrid TItem="Attendant" Value="_selectedAttendants" KeyProperty="Rowid" IsLoading="_attendantIsLoading"
                    Count="_attendantsCount" Data="_attendants" FilterPopupRenderMode="PopupRenderMode.OnDemand"
                    FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive" FilterMode="FilterMode.Simple"
                    AllowSorting="true" AllowFiltering="true" AllowPaging="true" PageSize="10" PagerHorizontalAlign="HorizontalAlign.Left"  
                    ColumnWidth="200px" ShowPagingSummary=true SelectionMode="DataGridSelectionMode.Single" Density="Density.Compact">
                    <Columns>
                        <RadzenDataGridColumn TItem="Attendant" Property="Id" Title="Id" Frozen=true />
                        <RadzenDataGridColumn TItem="Attendant" Property="FullName" Title="Name" Frozen=true />
                        <RadzenDataGridColumn TItem="Attendant" Property="User.Email" Title="Email" />
                        <RadzenDataGridColumn TItem="Attendant" Property="Age" Title="Age" />
                        <RadzenDataGridColumn TItem="Attendant" Property="Cel" Title="Cel Number" />
                        <RadzenDataGridColumn TItem="Attendant" Property="City" Title="City" />
                        <RadzenDataGridColumn TItem="Attendant" Property="Gender" Title="Gender" />
                    </Columns>
                </RadzenDataGrid>
            </RadzenStack>
        </RadzenCard>
    </RadzenStack>

</RadzenStack>
